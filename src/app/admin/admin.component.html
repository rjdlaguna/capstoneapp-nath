<div class="app-container">
  <!-- ================== MAIN CONTENT ================== -->
  <div class="admin-container">
    
    <!-- ================== ROW 1 STAT CARDS ================== -->
    <h2 class="dashboard-title">Statistics Dashboard</h2>
    
    <div class="flex items-center gap-4 mb-4">
      <label class="font-semibold">Row 1:</label>
      <select [(ngModel)]="selectedRow1" class="border px-2 py-1 rounded">
        <option value="approved">Approved</option>
        <option value="denied">Denied</option>
        <option value="pending">Pending</option>
        <option value="under_review">Under Review</option>
      </select>
    </div>

    <div class="statistics">
      <div class="stat-card">
        <h4>{{ formatStatName(selectedRow1) }} Today</h4>
        <p>{{ stats[selectedRow1].today }}</p>
      </div>
      <div class="stat-card">
        <h4>{{ formatStatName(selectedRow1) }} This Week</h4>
        <p>{{ stats[selectedRow1].week }}</p>
      </div>
      <div class="stat-card">
        <h4>{{ formatStatName(selectedRow1) }} This Month</h4>
        <p>{{ stats[selectedRow1].month }}</p>
      </div>
    </div>

    <!-- ================== ROW 2 STAT CARDS ================== -->
    <div class="flex items-center gap-4 mb-4">
      <label class="font-semibold">Row 2:</label>
      <select [(ngModel)]="selectedRow2" class="border px-2 py-1 rounded">
        <option value="approved">Approved</option>
        <option value="denied">Denied</option>
        <option value="pending">Pending</option>
        <option value="under_review">Under Review</option>
      </select>
    </div>

    <div class="statistics">
      <div class="stat-card">
        <h4>{{ formatStatName(selectedRow2) }} Today</h4>
        <p>{{ stats[selectedRow2].today }}</p>
      </div>
      <div class="stat-card">
        <h4>{{ formatStatName(selectedRow2) }} This Week</h4>
        <p>{{ stats[selectedRow2].week }}</p>
      </div>
      <div class="stat-card">
        <h4>{{ formatStatName(selectedRow2) }} This Month</h4>
        <p>{{ stats[selectedRow2].month }}</p>
      </div>
    </div>

    <!-- ================== TABLES WITH PAGINATION ================== -->
    <div class="table-grid">
      <div *ngFor="let row of rows" class="card">
        <h3 class="dashboard-title">{{ formatStatName(row === 1 ? selectedRow1 : selectedRow2) }}</h3>
        
        <table class="records-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Date</th>
              <th>Status</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let doc of getPaginatedItems(row)"
                (click)="doc.status === 'under_review' ? viewInProcessDetail(doc) : viewRequestDetail(doc)"
                style="cursor: pointer;">
              <td>{{ doc.name }}</td>
              <td>{{ doc.updated_at || doc.date_created | date:'medium' }}</td>
              <td class="status-{{ doc.status === 'under_review' ? 'pending' : doc.status }}">
                {{ doc.status === 'under_review' ? 'Under Review' : doc.status }}
              </td>
              <td>
                <button *ngIf="doc.archived === 0"
                        (click)="archiveRequest(doc, $event)"
                        class="btn pending">
                  Archive
                </button>
                <span *ngIf="doc.archived === 1">Archived</span>
              </td>
            </tr>
          </tbody>
        </table>

        <!-- Pagination -->
        <div style="display: flex; justify-content: flex-end; margin-top: 15px; gap: 5px;">
          <button *ngFor="let page of getTotalPages(row)"
                  (click)="changePage(row, page)"
                  [style.backgroundColor]="(row === 1 ? currentPage1 : currentPage2) === page ? '#2a7ca8' : 'white'"
                  [style.color]="(row === 1 ? currentPage1 : currentPage2) === page ? 'white' : '#333'"
                  style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; cursor: pointer;">
            {{ page }}
          </button>
        </div>
      </div>
    </div>

  </div>
</div>