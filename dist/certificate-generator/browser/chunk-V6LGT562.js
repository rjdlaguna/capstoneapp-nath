import{Ca as k,E as _,Ea as E,F as r,Fa as L,_ as C,j as x,ja as b,k as u,ka as w,l as p,m as c,n as h,na as P,p as d,pa as M,q as e,qa as m,r as i,ra as O,s as l,sa as v,ua as y,va as S,w as g,wa as z}from"./chunk-VI5CT2DH.js";import"./chunk-FDERIQAA.js";var F=class f{constructor(t,o,n){this.fb=t;this.router=o;this.authService=n;this.loginForm=this.fb.group({email:["",[m.required,m.email]],password:["",m.required]});let s=localStorage.getItem("user");if(s){let a=JSON.parse(s);a.role===1?this.router.navigate(["/admin"]):a.role===2?this.router.navigate(["/home-staff"]):a.role===3&&!a.detailsCompleted?this.router.navigate(["/edit-profile"]):this.router.navigate(["/"])}}loginForm;showPassword=!1;loading=!1;loginError="";get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}togglePassword(){this.showPassword=!this.showPassword}onSubmit(){if(this.loginError="",!this.loginForm.valid){this.loginError="Please enter a valid email and password.";return}this.loading=!0,this.authService.login(this.loginForm.value).subscribe({next:t=>{if(!t.token||!t.user){this.loginError=t.message||"Invalid email or password.";return}localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),t.user.role===1?this.router.navigate(["/admin"]):t.user.role===2?this.router.navigate(["/home-staff"]):t.user.role===3?t.user.detailsCompleted?this.router.navigate(["/"]):this.router.navigate(["/edit-profile"]):this.router.navigate(["/"])},error:t=>{console.error("Login failed:",t),this.loginError=t.error?.message||"Incorrect email or password."},complete:()=>{this.loading=!1}})}onMouseMove(t){let o=document.querySelector(".login-bg");if(o){let n=(t.clientX/window.innerWidth-.5)*20,s=(t.clientY/window.innerHeight-.5)*20;o.style.backgroundPosition=`${50+n}% ${50+s}%`}}goToRegister(){this.router.navigate(["/register"])}goToForgotPassword(t){t.preventDefault(),this.router.navigate(["/"])}goToOtp(){this.router.navigate(["/otpverify"])}static \u0275fac=function(o){return new(o||f)(c(k),c(b),c(L))};static \u0275cmp=h({type:f,selectors:[["app-login"]],hostBindings:function(o,n){o&1&&g("mousemove",function(a){return n.onMouseMove(a)},u)},decls:32,vars:5,consts:[["rel","stylesheet","href",x`https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css`],[1,"login-bg"],[1,"bg-image"],[1,"city-title"],["src","/assets/images/angeles_city_logo.png","alt","Angeles City Logo",1,"logo"],[1,"welcome-text"],[1,"login-container"],[1,"login-box"],[1,"form-box",3,"ngSubmit","formGroup"],[1,"login-title"],[1,"input-with-icon"],["type","email","formControlName","email","placeholder","EMAIL"],["formControlName","password","placeholder","PASSWORD",3,"type"],[1,"password-toggle",3,"click"],["type","submit",1,"login-btn",3,"disabled"],[1,"form-options"],[3,"click"],[1,"register-text"],["routerLink","/register",2,"cursor","pointer"],[2,"cursor","pointer",3,"click"]],template:function(o,n){o&1&&(l(0,"link",0),e(1,"div",1),l(2,"div",2),e(3,"h1",3),r(4,"ANGELES CITY"),i(),l(5,"img",4),e(6,"p",5),r(7,"WELCOME ANGELE\xD1OS"),i(),e(8,"div",6)(9,"div",7)(10,"form",8),g("ngSubmit",function(){return n.onSubmit()}),e(11,"h3",9),r(12,"LOGIN"),i(),e(13,"div",10),l(14,"input",11),i(),e(15,"div",10),l(16,"input",12),e(17,"span",13),g("click",function(){return n.showPassword=!n.showPassword}),l(18,"i"),i()(),e(19,"button",14),r(20,"LOGIN "),i(),e(21,"div",15)(22,"a",16),g("click",function(a){return n.goToForgotPassword(a)}),r(23,"Forgot password?"),i()(),e(24,"p",17),r(25," Don't have an account? "),e(26,"a",18),r(27,"Register"),i()(),e(28,"p"),r(29," Not verified yet? "),e(30,"a",19),g("click",function(){return n.goToOtp()}),r(31,"Go to OTP Verification"),i()()()()()()),o&2&&(p(10),d("formGroup",n.loginForm),p(6),d("type",n.showPassword?"text":"password"),p(2),_(n.showPassword?"fa-solid fa-eye":"fa-solid fa-eye-slash"),p(),d("disabled",n.loginForm.invalid))},dependencies:[C,E,y,M,O,v,z,S,P,w],styles:[".login-bg[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;box-sizing:border-box;padding:20px}.bg-image[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-image:url(/assets/images/angeles_city_bg.png);background-size:cover;background-position:center;filter:blur(10px);transform:scale(1.1);z-index:-1}.city-title[_ngcontent-%COMP%]{font-size:32px;font-weight:800;color:#050505;letter-spacing:2px;margin-bottom:10px;text-transform:uppercase;text-shadow:-1px -1px 0 #fff,1px -1px 0 #fff,-1px 1px 0 #fff,1px 1px 0 #fff}.welcome-text[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#050505;letter-spacing:1px;margin-bottom:25px;text-transform:uppercase;text-shadow:-1px -1px 0 #fff,1px -1px 0 #fff,-1px 1px 0 #fff,1px 1px 0 #fff}.logo[_ngcontent-%COMP%]{width:130px;margin-bottom:1px}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-weight:600;letter-spacing:1px;color:#000;margin-bottom:30px}.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.login-box[_ngcontent-%COMP%]{background:#f44336;width:100%;min-height:400px;max-width:800px;padding:30px 25px;border-radius:30px;box-shadow:0 8px 20px #0000004d;text-align:center}.form-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.login-title[_ngcontent-%COMP%]{color:#000;font-size:20px;font-weight:700;margin-bottom:20px}.input-with-icon[_ngcontent-%COMP%]{position:relative;width:100%;max-width:400px;margin-bottom:15px;display:flex;justify-content:center}.input-with-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 45px 12px 16px;border-radius:20px;border:none;outline:none;font-size:18px;background:#ffd6d1;box-sizing:border-box}.input-with-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:2px solid #f44336;box-shadow:0 0 5px #f4433680}.input-with-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;right:15px;top:50%;transform:translateY(-50%);color:#333;cursor:pointer;font-size:20px}.password-toggle[_ngcontent-%COMP%]{position:absolute;right:15px;top:50%;transform:translateY(-50%);cursor:pointer;color:#555;font-size:18px;display:flex;align-items:center;transition:color .2s;z-index:2}.password-toggle[_ngcontent-%COMP%]:hover{color:#f44336}.error[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#2b0000;font-size:23px}.form-options[_ngcontent-%COMP%]{width:100%;text-align:center;margin-bottom:20px}.form-options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px;color:#ffd6d1;text-decoration:none}.form-options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.login-btn[_ngcontent-%COMP%]{background:#ffb3ab;color:#000;border:none;border-radius:20px;padding:10px 30px;font-size:20px;cursor:pointer;margin-bottom:15px;transition:background .3s}.login-btn[_ngcontent-%COMP%]:hover{background:#ff8c75}.login-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.register-text[_ngcontent-%COMP%]{font-size:20px;color:#ffd6d1;text-align:center}.register-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;font-weight:600;text-decoration:none;margin-left:3px}.register-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media(max-width:1024px){.city-title[_ngcontent-%COMP%], .welcome-text[_ngcontent-%COMP%]{font-size:26px;text-align:center}.logo[_ngcontent-%COMP%]{width:110px}.login-box[_ngcontent-%COMP%]{max-width:600px;padding:25px 20px}.input-with-icon[_ngcontent-%COMP%]{max-width:360px}.input-with-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px;padding:10px 40px 10px 14px}.login-btn[_ngcontent-%COMP%]{font-size:18px;padding:10px 25px}.form-options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .register-text[_ngcontent-%COMP%]{font-size:18px}}@media(max-width:600px){.login-bg[_ngcontent-%COMP%]{padding:15px}.city-title[_ngcontent-%COMP%]{font-size:22px;margin-bottom:5px}.welcome-text[_ngcontent-%COMP%]{font-size:20px;margin-bottom:15px}.logo[_ngcontent-%COMP%]{width:90px;margin-bottom:5px}.login-box[_ngcontent-%COMP%]{width:100%;max-width:100%;border-radius:20px;padding:20px 15px}.login-title[_ngcontent-%COMP%]{font-size:18px}.input-with-icon[_ngcontent-%COMP%]{max-width:100%}.input-with-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:15px;padding:10px 38px 10px 12px}.password-toggle[_ngcontent-%COMP%]{font-size:16px}.login-btn[_ngcontent-%COMP%]{width:100%;font-size:18px;padding:12px}.form-options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .register-text[_ngcontent-%COMP%]{font-size:16px}}"]})};export{F as LoginComponent};
